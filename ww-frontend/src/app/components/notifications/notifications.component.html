<div class="notifications-container mat-elevation-z2">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Notifications</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="notification-actions">
        <button mat-stroked-button color="primary"
                (click)="markAllAsRead()"
                [disabled]="unreadNotifications.length === 0">
          <mat-icon>done_all</mat-icon> Mark everything as read
        </button>
        <button mat-stroked-button color="warn"
                (click)="deleteAllReadNotifications()"
                [disabled]="readNotifications.length === 0">
          <mat-icon>delete_sweep</mat-icon> Delete read messages
        </button>
      </div>

      <mat-divider></mat-divider>

      <h3 *ngIf="unreadNotifications.length > 0">Unread({{ unreadNotifications.length }})</h3>
      <mat-list *ngIf="unreadNotifications.length > 0; else noUnread">
        <mat-list-item *ngFor="let notification of unreadNotifications">
          <mat-card class="notification-card unread-card" (click)="markNotificationAsRead(notification)">
            <mat-card-content>
              <div class="notification-header">
                <h4>{{ notification.title }}</h4>
                <button mat-icon-button color="warn" (click)="deleteNotification(notification.id); $event.stopPropagation()">
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
              <p>{{ notification.body }}</p>
              <span class="notification-date">{{ notification.createdAt | date:'short' }}</span>
            </mat-card-content>
          </mat-card>
          <mat-divider></mat-divider>
        </mat-list-item>
      </mat-list>
      <ng-template #noUnread>
        <p *ngIf="readNotifications.length > 0" class="no-notifications">No new notifications</p>
      </ng-template>


      <h3 *ngIf="readNotifications.length > 0">Read ({{ readNotifications.length }})</h3>
      <mat-list *ngIf="readNotifications.length > 0; else noRead">
        <mat-list-item *ngFor="let notification of readNotifications">
          <mat-card class="notification-card read-card">
            <mat-card-content>
              <div class="notification-header">
                <h4>{{ notification.title }}</h4>
                <button mat-icon-button color="warn" (click)="deleteNotification(notification.id); $event.stopPropagation()">
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
              <p>{{ notification.body }}</p>
              <span class="notification-date">{{ notification.createdAt | date:'short' }}</span>
            </mat-card-content>
          </mat-card>
          <mat-divider></mat-divider>
        </mat-list-item>
      </mat-list>
      <ng-template #noRead>
        <p *ngIf="unreadNotifications.length === 0" class="no-notifications">No notifications here</p>
      </ng-template>

      <p *ngIf="notifications.length === 0" class="no-notifications">You have no notifications.</p>
    </mat-card-content>
  </mat-card>
</div>
